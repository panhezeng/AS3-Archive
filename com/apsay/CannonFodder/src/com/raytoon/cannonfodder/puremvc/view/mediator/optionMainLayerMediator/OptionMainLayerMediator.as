///////////////////////////////////////////////////////////
//  OptionMainLayerMediator.as
//  Macromedia ActionScript Implementation of the Class OptionMainLayerMediator
//  Generated by Enterprise Architect
//  Created on:      01-六月-2011 14:22:17
//  Original author: LuXianli
///////////////////////////////////////////////////////////

package com.raytoon.cannonfodder.puremvc.view.mediator.optionMainLayerMediator
{
	import com.raytoon.cannonfodder.puremvc.view.ui.optionMainLayer.OptionMainLayer;
	import com.raytoon.cannonfodder.tools.utils.NotificationNameList;
	import org.puremvc.as3.interfaces.IMediator;
	import org.puremvc.as3.interfaces.INotification;
	import org.puremvc.as3.patterns.mediator.Mediator;
	/**
	 * @author LuXianli
	 * @version 1.0
	 * @created 01-六月-2011 14:22:17
	 */
	public class OptionMainLayerMediator extends Mediator implements IMediator
	{
		public static const NAME:String = "OptionMainLayerMediator";
		public function OptionMainLayerMediator(viewComponent:OptionMainLayer){
			super(NAME,viewComponent);
		}
		
		public function get optionMainLayer():OptionMainLayer {
			
			return viewComponent as OptionMainLayer
		}
		
		override public function onRegister():void 
		{
			
		}
		
		override public function listNotificationInterests():Array 
		{
			return [NotificationNameList.SHOW_CHAPTER_INFO,
					NotificationNameList.DEPLOYMENT_MAP_INFO,
					NotificationNameList.QUIT_WAR];
		}
		//模拟箭塔数据
		//private var towerInfo:String = '{"mapId":103,"materialId":101,"mapInfo":[{"id":602,"type":"organTower","level":1,"unitId":100001,"row":0,"num":0},{"id":601,"type":"organTower","level":1,"unitId":100002,"row":3,"num":0},{"id":510,"type":"defenceTower","level":1,"unitId":100003,"row":1,"num":1},{"id":913,"type":"obstacle","level":1,"unitId":100004,"row":2,"num":1},{"id":511,"type":"defenceTower","level":1,"unitId":100005,"row":3,"num":1},{"id":505,"type":"defenceTower","level":1,"unitId":100006,"row":4,"num":1},{"id":702,"type":"energyTower","level":1,"unitId":100007,"row":5,"num":1},{"id":901,"type":"obstacle","level":1,"unitId":100008,"row":6,"num":1},{"id":504,"type":"defenceTower","level":1,"unitId":100009,"row":6,"num":2},{"id":901,"type":"obstacle","level":1,"unitId":1000010,"row":0,"num":3},{"id":508,"type":"defenceTower","level":1,"unitId":1000011,"row":1,"num":3},{"id":701,"type":"energyTower","level":1,"unitId":1000012,"row":2,"num":3},{"id":506,"type":"defenceTower","level":1,"unitId":1000013,"row":3,"num":3},{"id":509,"type":"defenceTower","level":1,"unitId":1000014,"row":4,"num":3},{"id":502,"type":"defenceTower","level":1,"unitId":1000015,"row":6,"num":3},{"id":703,"type":"energyTower","level":1,"unitId":1000016,"row":6,"num":4},{"id":503,"type":"defenceTower","level":1,"unitId":1000017,"row":1,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":1000018,"row":2,"num":5},{"id":507,"type":"defenceTower","level":1,"unitId":1000019,"row":3,"num":5},{"id":509,"type":"defenceTower","level":1,"unitId":10000120,"row":4,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":10000121,"row":5,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":10000122,"row":6,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":10000123,"row":0,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000124,"row":1,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000125,"row":3,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000126,"row":4,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000127,"row":5,"num":7},{"id":501,"type":"defenceTower","level":1,"unitId":10000128,"row":2,"num":7}]}';
		private var towerInfo:String = '{"mapId":103,"materialId":101,"mapInfo":[{"id":602,"type":"organTower","level":1,"unitId":100001,"row":0,"num":0},{"id":601,"type":"organTower","level":1,"unitId":100002,"row":3,"num":0},{"id":510,"type":"defenceTower","level":1,"unitId":100003,"row":1,"num":1},{"id":913,"type":"obstacle","level":1,"unitId":100004,"row":2,"num":1},{"id":511,"type":"defenceTower","level":1,"unitId":100005,"row":3,"num":1},{"id":505,"type":"defenceTower","level":1,"unitId":100006,"row":4,"num":1},{"id":702,"type":"energyTower","level":1,"unitId":100007,"row":5,"num":1},{"id":901,"type":"obstacle","level":1,"unitId":100008,"row":6,"num":1},{"id":901,"type":"obstacle","level":1,"unitId":1000010,"row":0,"num":3},{"id":508,"type":"defenceTower","level":1,"unitId":1000011,"row":1,"num":3},{"id":701,"type":"energyTower","level":1,"unitId":1000012,"row":2,"num":3},{"id":506,"type":"defenceTower","level":1,"unitId":1000013,"row":3,"num":3},{"id":509,"type":"defenceTower","level":1,"unitId":1000014,"row":4,"num":3},{"id":503,"type":"defenceTower","level":1,"unitId":1000017,"row":1,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":1000018,"row":2,"num":5},{"id":507,"type":"defenceTower","level":1,"unitId":1000019,"row":3,"num":5},{"id":509,"type":"defenceTower","level":1,"unitId":10000120,"row":4,"num":5},{"id":901,"type":"obstacle","level":1,"unitId":10000123,"row":0,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000124,"row":1,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000125,"row":3,"num":7},{"id":901,"type":"obstacle","level":1,"unitId":10000126,"row":4,"num":7},{"id":501,"type":"defenceTower","level":1,"unitId":10000128,"row":2,"num":7}]}';
		private var _tempTowerInfo:String = "";
		override public function handleNotification(notification:INotification):void 
		{
			switch (notification.getName()) {
				
				case NotificationNameList.SHOW_CHAPTER_INFO:
					if(_tempTowerInfo)
						optionMainLayer.showTowers(_tempTowerInfo);
					else
						optionMainLayer.showTowers(notification.getBody());
					_tempTowerInfo = "";
				break;
				
				case NotificationNameList.DEPLOYMENT_MAP_INFO:
					_tempTowerInfo = notification.getBody() as String;
					
				break;
				
				case NotificationNameList.QUIT_WAR:
					optionMainLayer.removeAllElement();
				break;
			}
		}

	}//end OptionMainLayerMediator

}